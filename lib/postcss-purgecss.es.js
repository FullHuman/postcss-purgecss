import path from"path";import postcss from"postcss";import Purgecss from"purgecss";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},toConsumableArray=function(o){if(Array.isArray(o)){for(var r=0,e=Array(o.length);r<o.length;r++)e[r]=o[r];return e}return Array.from(o)},CONFIG_FILENAME="purgecss.config.js",ERROR_CONFIG_FILE_LOADING="Error loading the config file",loadConfigFile=function(o){var r=void 0===o?CONFIG_FILENAME:o,e=void 0;try{var t=path.resolve(process.cwd(),r);e=require(t)}catch(o){throw new Error(ERROR_CONFIG_FILE_LOADING+o.message)}return e},index=postcss.plugin("postcss-plugin-purgecss",function(o){return function(r,e){"string"!=typeof o&&void 0!==o||(o=loadConfigFile(o)),o.css&&o.css.length||(o.css=["__postcss_purgecss_placeholder"]);var t=new Purgecss(o);t.root=r;var n=t.options,s=n.content,c=n.extractors,i=s.filter(function(o){return"string"==typeof o}),f=s.filter(function(o){return"object"===(void 0===o?"undefined":_typeof(o))}),a=t.extractFileSelector(i,c),u=t.extractRawSelector(f,c),p=new Set([].concat(toConsumableArray(a),toConsumableArray(u)));t.getSelectorsCss(p),t.options.keyframes&&t.removeUnusedKeyframes(),t.options.fontFace&&t.removeUnusedFontFaces()}});export default index;
